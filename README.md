# replication
Домашнее задание по теме – «Репликация и масштабирование. Часть 1» - Машаев Роман

Задание 1.

Оба режима используются для **репликации** данных (их копирования и синхронизации) между несколькими серверами баз данных. Это делается для повышения **доступности,** отказоустойчивости и масштабируемости системы.

**1. Репликация Master-Slave (Ведущий-Ведомый)**

Это классическая и наиболее распространенная архитектура с одним направлением данных.

**Принцип работы:**

Существует один главный (Master) сервер и один или несколько подчиненных (Slave) серверов. Все операции записи (INSERT, UPDATE, DELETE) выполняются только на Master, который автоматически копирует все изменения (через бинарные логи - binlog) на Slave-серверы. Slave-серверы постоянно применяют эти изменения к своим копиям данных, оставаясь в актуальном состоянии. Операции чтения (SELECT) можно и нужно распределять по Slave-серверам.

**Ключевые характеристики:**

Однонаправленность -  данные текут только в одном направлении: Master → Slave.
Разделение чтения и записи - запись - только на Master, чтение - с Master и всех Slave.
Согласованность - данные на Slave в конечном счете согласованы с Master (модель eventual consistency). Может быть небольшая задержка (репликационный лаг).

**Преимущества:**

Масштабирование чтения - можно добавлять множество Slave-серверов, чтобы справляться с большим объемом запросов на чтение.
Повышение отказоустойчивости - если Master выйдет из строя, можно перенаправить запросы на чтение на Slave. (Для записи потребуется процедура перевода одного из Slave в роль нового Master).
Резервное копирование - можно делать бэкапы на Slave, не нагружая основной Master-сервер.
Простота - концептуально проще в настройке и понимании.	

**Недостатки:**

Единая точка отказа (для записи): Если Master падает, возможность записи в базу теряется до тех пор, пока его не восстановят или не назначат нового Master.
Ограничение масштабируемости записи - все записи по-прежнему идут на один сервер, который может стать «бутылочным горлышком».


**2. Репликация Master-Master (Ведущий-Ведущий)**

В этой архитектуре оба (или более) сервера являются главными и равноправными.

**Принцип работы:**

Каждый сервер (Master) может принимать операции как на запись, так и на чтение. Изменения, сделанные на одном Master, реплицируются на все остальные Master-серверы. По сути, каждый узел одновременно является и Master, и Slave для других узлов.


**Ключевыми характеристиками являются:**

Данные реплицируются между всеми узлами в обоих направлениях (двунаправленность); 
Запись на любом узле- клиенты могут писать в любой узел, что повышает доступность;
Повышенная сложность- очень сложна в настройке и поддержании целостности данных.

**Преимущества:**

Высокая доступность для записи- если один Master падает, запись можно продолжать на других, что минимизирует простой.
Географическое распределение- можно разместить Master-серверы в разных регионах, чтобы пользователи записывали данные в ближайший к ним узел, уменьшая задержку.

**Недостатки и серьезные риски:**

Конфликты репликации- самая большая проблема. Если два разных клиента изменят одну и ту же строку данных на двух разных Master-серверах одновременно, возникнет конфликт. Разрешение таких конфликтов — нетривиальная задача. 
Сложность настройки и администрирования - требует очень тщательной настройки и глубокого понимания работы СУБД.
Риск потери данных - при неправильном разрешении конфликтов можно потерять часть изменений.
Проблемы с согласованностью - гарантировать строгую согласованность данных (strong consistency) между всеми узлами в реальном времени практически невозможно.

Таким образом, Master-Slave — это надежный, предсказуемый и широко используемый «рабочий» вариант для 90% задач. Он отлично подходит для масштабирования чтения и организации резервных копий. 
Master-Master же это более экзотическая и рискованная архитектура. Ее стоит рассматривать только в специфических сценариях, где доступность для записи критически важна, 
а потенциальные риски конфликтов и сложность осознаны и приняты. Часто вместо «чистого» Master-Master используются другие технологии (например, кластерные решения с общим диском или распределенные БД).

Задание 2
Использована версия MySQL 5.7 (не удалось установить, на используемом ПК не поддерживается ряд инструкций процессором
 и установлен 7 Windows, поэтому синтаксис при выполнении ДЗ местами отличается от того, который 
использован при демонстрации в процессе проведения вебинара (MySQL 8.4).
1. ![Скриншот процесса установки MySQL](https://github.com/Mazaich/replication/blob/main/Снимок%20экрана%20от%202025-09-29%2012-46-30.png?raw=true)
2. ![Скриншот master status](https://github.com/Mazaich/replication/blob/main/Снимок%20экрана%20от%202025-09-29%2015-22-49.png?raw=true)
3. ![Скриншот настройки slave сервера](https://github.com/Mazaich/replication/blob/main/Снимок%20экрана%20от%202025-09-29%2016-11-08.png?raw=true)
4. ![Скриншот slave status](https://github.com/Mazaich/replication/blob/main/Снимок%20экрана%20от%202025-09-29%2016-39-59.png?raw=true)
5. ![Скриншот slave status](https://github.com/Mazaich/replication/blob/main/Снимок%20экрана%20от%202025-09-29%2016-40-07.png?raw=true)
6. ![Скриншот результата репилицирования базы данных](https://github.com/Mazaich/replication/blob/main/Снимок%20экрана%20от%202025-09-29%2017-24-21.png?raw=true)
